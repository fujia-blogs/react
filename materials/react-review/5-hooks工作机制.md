# hooks 工作机制

1. hooks 的使用原则：

- 只在 react 函数中调用 hook
- 不要在循环、条件或嵌套函数中调用 hook。

**确保 hooks 在每次渲染时都保持同样的执行顺序。**

## 调用流程：hooks 的正常工作，在底层依赖于顺序链表

1. useState

- mountState(首次渲染)构建链表并渲染
- updateState 依次遍历链表并渲染

2. hooks 的渲染是通过“依次遍历”来定位每个 hooks 的内容的，如果前后两次读到的链表在顺序上出现差异，那么渲染的结果自然是不可控的。

## 要点

1. 原理 !== 源码，阅读源码只是掌握原理的一种手段，react hooks 的源码链路相对较长，学习成本高，效果也难以保证。

2. hooks 的本质是链表
